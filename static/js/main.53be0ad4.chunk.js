(this["webpackJsonpkomoot-challenge"]=this["webpackJsonpkomoot-challenge"]||[]).push([[0],{28:function(e,t,n){e.exports=n(60)},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},40:function(e,t){},42:function(e,t){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(26),o=n.n(i),s=(n(33),n(4)),r=(n(34),n(35),n(27),function(e){e.waypoints}),l=n(2),u=function(e,t){return[].concat(Object(l.a)(t.slice(0,e)),Object(l.a)(t.slice(e+1)))},d=function(e,t,n){return[].concat(Object(l.a)(n.slice(0,e)),[t],Object(l.a)(n.slice(e)))},m=(n(52),n(53),function(e){var t=e.name,n=e.className,a=void 0===n?"":n;return c.a.createElement("span",{className:"Icon Icon--"+t+" "+a})}),h=(n(54),n(55),function(e){var t=e.onClick;return c.a.createElement("button",{className:"DeleteButton",onClick:t},c.a.createElement(m,{name:"delete"}))}),p=function(e){var t=e.className,n=e.index,c=e.onMove;return{onDragEnter:Object(a.useCallback)((function(e){e.currentTarget.classList.add(t)}),[t]),onDragLeave:Object(a.useCallback)((function(e){e.currentTarget.classList.remove(t)}),[t]),onDragOver:Object(a.useCallback)((function(e){e.preventDefault()}),[]),onDrop:Object(a.useCallback)((function(e){e.preventDefault(),e.currentTarget.classList.remove(t);var a=Number(e.dataTransfer.getData("text/plain"));c(a,n)}),[n,c,t])}},f=function(e){for(var t=[],n=0,a=Object.entries(e);n<a.length;n++){var c=Object(s.a)(a[n],2),i=c[0];c[1]&&t.push(i)}return t.join(" ")},g=function(e){var t=e.index,n=e.selected,i=e.onDelete,o=e.onMove,s=e.onSelectedIndexChange,r=Object(a.useCallback)((function(){return i(t)}),[t,i]),l=Object(a.useCallback)((function(e){e.dataTransfer.dropEffect="move",e.dataTransfer.setData("text/plain",String(t))}),[t]),u=p({className:"WaypointListItem--target",index:t,onMove:o});return c.a.createElement("li",Object.assign({className:f({WaypointListItem:!0,"WaypointListItem--selected":n}),draggable:!0,onDragStart:l},u,{onMouseEnter:Object(a.useCallback)((function(){return s(t)}),[s,t]),onMouseLeave:Object(a.useCallback)((function(){return s(void 0)}),[s])}),c.a.createElement(m,{name:"draggable",className:"WaypointListItem_grip"}),c.a.createElement("span",null,"Waypoint ",t+1),c.a.createElement(h,{onClick:r}))},v=(n(56),function(e){var t=e.index,n=e.onMove,a=p({className:"ExtraDropZone--target",index:t,onMove:n});return c.a.createElement("li",Object.assign({className:"ExtraDropZone"},a))}),b=function(e){var t=e.waypoints,n=e.selectedIndex,i=e.onChange,o=e.onSelectedIndexChange,s=Object(a.useCallback)((function(e){i(u(e,t))}),[t,i]),r=Object(a.useCallback)((function(e,n){i(function(e,t,n){var a=n[e];return e<t?u(e,d(t,a,n)):e>t?d(t,a,u(e,n)):n}(e,n,t))}),[t,i]);return c.a.createElement("ul",{className:"WaypointList"},t.map((function(e,t){return c.a.createElement(g,{key:t,index:t,onDelete:s,onMove:r,selected:t===n,onSelectedIndexChange:o})})),c.a.createElement(v,{index:t.length,onMove:r}))},y=(n(57),n(12)),k=n(13),x=(n(58),n(1)),j=(n(59),function(e,t){return x.divIcon({html:"".concat(e+1),className:f({NumberedIcon:!0,"NumberedIcon--selected":t}),iconSize:[25,25]})}),O=function(){function e(t,n){Object(y.a)(this,e),this.map=void 0,this.latlngs=[],this.markers=[],this.polyline=void 0,this.selectedIndex=void 0,this.events=void 0,this.map=t,this.events=n,this.polyline=x.polyline([],{weight:6}).addTo(t)}return Object(k.a)(e,[{key:"addLatLng",value:function(e){this.latlngs=[].concat(Object(l.a)(this.latlngs),[e]),this.polyline.addLatLng(e),this.markers.push(this.createMarker(e,this.markers.length).addTo(this.map)),this.events.onChange(this.latlngs)}},{key:"createMarkers",value:function(e){var t=this;return e.map(this.createMarker,this).map((function(e){return e.addTo(t.map)}))}},{key:"createMarker",value:function(e,t){var n=this;return function(e){var t=e.latlng,n=e.index,a=e.icon,c=e.onDrag,i=e.onDragEnd,o=e.onSelectedIndexChange,s=x.marker(t,{icon:a,draggable:!0}),r=!1;return s.on("dragstart",(function(){r=!0})),s.on("drag",(function(){c(n,s.getLatLng())})),s.on("dragend",(function(){i(),r=!1})),s.on("mouseover",(function(){r||o(n)})),s.on("mouseout",(function(){r||o(void 0)})),s}({index:t,latlng:e,icon:j(t,t===this.selectedIndex),onDrag:this.updatePolylineAt.bind(this),onDragEnd:function(){return n.events.onChange(n.latlngs)},onSelectedIndexChange:this.events.onSelectedIndexChange})}},{key:"updatePolylineAt",value:function(e,t){this.latlngs=function(e,t,n){return[].concat(Object(l.a)(n.slice(0,e)),[t],Object(l.a)(n.slice(e+1)))}(e,t,this.latlngs),this.polyline.setLatLngs(this.latlngs)}},{key:"setLatLngs",value:function(e){var t,n,a=this;(t=this.latlngs,n=e,t.length===n.length&&t.every((function(e,t){return e.equals(n[t])})))||(this.latlngs=e,this.polyline.setLatLngs(this.latlngs),this.markers.forEach((function(e){return e.removeFrom(a.map)})),this.markers=this.createMarkers(this.latlngs))}},{key:"setSelected",value:function(e){void 0!==this.selectedIndex&&this.markers[this.selectedIndex]&&this.markers[this.selectedIndex].setIcon(j(this.selectedIndex,!1)),void 0!==e&&this.markers[e].setIcon(j(e,!0)),this.selectedIndex=e}}]),e}(),I=new x.LatLng(58.3728214,21.8631477),C=function(){function e(t,n){var a=this;Object(y.a)(this,e),this.map=void 0,this.polyline=void 0,this.map=x.map(t).setView(I,12),navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;a.map.setView([t.latitude,t.longitude],12)})),x.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoicmVua3UiLCJhIjoiY2tnZmVzZGdtMHB6MDJzbmFoMmRzdms2eCJ9.lStxev2R9jj1QV-MvNRFtQ"}).addTo(this.map),this.polyline=new O(this.map,n),this.map.on("click",(function(e){var t=e.latlng;return a.polyline.addLatLng(t)}))}return Object(k.a)(e,[{key:"updateWaypoints",value:function(e){this.polyline.setLatLngs(e)}},{key:"setSelectedWaypoint",value:function(e){this.polyline.setSelected(e)}}]),e}(),E=function(e){var t=e.waypoints,n=e.selectedIndex,i=e.onChange,o=e.onSelectedIndexChange,r=Object(a.useState)(),l=Object(s.a)(r,2),u=l[0],d=l[1],m=Object(a.useRef)(null);return Object(a.useEffect)((function(){!u&&m.current&&d(new C(m.current.id,{onChange:i,onSelectedIndexChange:o}))}),[m,u,d,i,o]),Object(a.useEffect)((function(){u&&u.updateWaypoints(t)}),[u,t]),Object(a.useEffect)((function(){u&&u.setSelectedWaypoint(n)}),[u,n]),c.a.createElement("div",{className:"Map",id:"mapid",ref:m})},L=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(void 0),l=Object(s.a)(o,2),u=l[0],d=l[1];return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"App__sidebar"},c.a.createElement("h1",{className:"App__title"},"Route Builder"),c.a.createElement("div",{className:"App__list"},c.a.createElement(b,{waypoints:n,selectedIndex:u,onChange:i,onSelectedIndexChange:d})),c.a.createElement(r,{waypoints:n})),c.a.createElement("div",{className:"App__mapArea"},c.a.createElement(E,{waypoints:n,selectedIndex:u,onChange:i,onSelectedIndexChange:d})))};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(L,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.53be0ad4.chunk.js.map